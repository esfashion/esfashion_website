import{_ as A}from"./tRsoRx7g.js";import{d as j,E as F,m as k,L as I,c as a,a as t,g as K,p,v as _,u as i,B as x,h as L,F as y,r as w,o as l,t as C,_ as M}from"./tRvisQ-T.js";import{u as N}from"./C7BoYRwF.js";import"./-3vxJr6i.js";import"./Dcu6dFmL.js";const R={class:"p-6 space-y-6"},q={class:"flex pb-2 w-full justify-between"},P={class:"flex justify-between items-center"},z={class:"font-semibold"},G=["onClick"],H={class:"flex gap-2 items-center"},J=["onUpdate:modelValue"],Q=["onUpdate:modelValue"],W=["onClick"],X={class:"grid gap-2 md:grid-cols-2"},Y={key:0},Z={class:"font-mono"},ee={class:"text-xs text-gray-500 ml-2"},te={key:1,class:"flex gap-2 items-center"},ne={class:"flex gap-2"},se=["onClick"],oe=["onClick"],ie=["onClick"],ae=j({__name:"calendar",async setup(le){let S,g;const c=N();[S,g]=F(()=>c.init()),await S,g();const d=k("");function O(){d.value&&(c.addDateSlot(d.value),d.value="")}function T(n){confirm("Delete this day and all its time slots?")&&c.deleteDateSlot(n)}const f=I({}),v=I({});function V(n){const e=f[n];e&&(c.addTimeSlot(n,e,v[n]??1),f[n]="",v[n]=1)}const b=k(null),u=k(""),r=k(1);function h(n,e){return`${n}-${e}`}function U(n,e){b.value=h(n,e.time24),u.value=e.time24,r.value=e.capacity}function $(n,e){c.updateTimeSlot(n,e,{time24:u.value,capacity:r.value}),D()}function D(){b.value=null,u.value="",r.value=1}function E(n,e){confirm("Delete this time slot?")&&c.deleteTimeSlot(n,e)}return(n,e)=>{const B=A;return l(),a("div",R,[t("div",q,[K(B,{routePath:"/booking"}),e[3]||(e[3]=t("h2",{class:"text-xl font-bold py-4"},"Calendar",-1))]),t("form",{class:"flex gap-2 items-center border p-4 rounded",onSubmit:L(O,["prevent"])},[p(t("input",{type:"date","onUpdate:modelValue":e[0]||(e[0]=s=>x(d)?d.value=s:null),class:"input",required:""},null,512),[[_,i(d)]]),e[4]||(e[4]=t("button",{class:"btn-primary"},"Add Day",-1))],32),(l(!0),a(y,null,w(i(c).calendar,s=>(l(),a("div",{key:s.dateISO,class:"border p-4 rounded space-y-4"},[t("div",P,[t("h3",z,C(s.dateISO),1),t("button",{class:"btn-danger",onClick:o=>T(s.dateISO)}," Delete Day ",8,G)]),t("div",H,[p(t("input",{type:"time","onUpdate:modelValue":o=>i(f)[s.dateISO]=o,class:"input"},null,8,J),[[_,i(f)[s.dateISO]]]),p(t("input",{type:"number",min:"1","onUpdate:modelValue":o=>i(v)[s.dateISO]=o,class:"input w-24",placeholder:"Cap"},null,8,Q),[[_,i(v)[s.dateISO],void 0,{number:!0}]]),t("button",{class:"btn",onClick:o=>V(s.dateISO)}," + Time ",8,W)]),t("div",X,[(l(!0),a(y,null,w(s.times,o=>(l(),a("div",{key:o.time24,class:"flex justify-between items-center border rounded p-2"},[i(b)!==h(s.dateISO,o.time24)?(l(),a("div",Y,[t("span",Z,C(o.time24),1),t("span",ee," cap: "+C(o.capacity),1)])):(l(),a("div",te,[p(t("input",{type:"time","onUpdate:modelValue":e[1]||(e[1]=m=>x(u)?u.value=m:null),class:"input"},null,512),[[_,i(u)]]),p(t("input",{type:"number",min:"1","onUpdate:modelValue":e[2]||(e[2]=m=>x(r)?r.value=m:null),class:"input w-20"},null,512),[[_,i(r),void 0,{number:!0}]])])),t("div",ne,[i(b)!==h(s.dateISO,o.time24)?(l(),a(y,{key:0},[t("button",{class:"btn",onClick:m=>U(s.dateISO,o)}," Edit ",8,se),t("button",{class:"btn-danger",onClick:m=>E(s.dateISO,o.time24)}," Delete ",8,oe)],64)):(l(),a(y,{key:1},[t("button",{class:"btn-primary",onClick:m=>$(s.dateISO,o.time24)}," Save ",8,ie),t("button",{class:"btn",onClick:D}," Cancel ")],64))])]))),128))])]))),128))])}}}),pe=M(ae,[["__scopeId","data-v-24f2e4b2"]]);export{pe as default};
