import{I as K,a9 as P,Y as $,z as W,$ as Y,aa as _,m as L,ab as B,ac as Q,b as A,ad as S,u as U,M as X}from"./tRvisQ-T.js";const Z=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const ee=Object.prototype.toString,te=e=>ee.call(e)==="[object Object]",ne=()=>{};function re(...e){if(e.length!==1)return _(...e);const r=e[0];return typeof r=="function"?$(B(()=>({get:r,set:ne}))):L(r)}function oe(e,r){function t(...n){return new Promise((i,a)=>{Promise.resolve(e(()=>r.apply(this,n),{fn:r,thisArg:this,args:n})).then(i).catch(a)})}return t}const R=e=>e();function ie(e=R,r={}){const{initialState:t="active"}=r,n=re(t==="active");function i(){n.value=!1}function a(){n.value=!0}const u=(...s)=>{n.value&&e(...s)};return{isActive:$(n),pause:i,resume:a,eventFilter:u}}function M(e){return Array.isArray(e)?e:[e]}function ae(e){return Y()}function ue(e,r,t={}){const{eventFilter:n=R,...i}=t;return W(e,oe(n,r),i)}function le(e,r,t={}){const{eventFilter:n,initialState:i="active",...a}=t,{eventFilter:u,pause:s,resume:p,isActive:f}=ie(n,{initialState:i});return{stop:ue(e,r,{...a,eventFilter:u}),pause:s,resume:p,isActive:f}}const se=le;function ce(e,r=!0,t){ae()?K(e,t):r?e():P(e)}function fe(e,r,t){return W(e,r,{...t,immediate:!0})}const g=Z?window:void 0;function de(e){var r;const t=S(e);return(r=t?.$el)!==null&&r!==void 0?r:t}function D(...e){const r=(n,i,a,u)=>(n.addEventListener(i,a,u),()=>n.removeEventListener(i,a,u)),t=A(()=>{const n=M(S(e[0])).filter(i=>i!=null);return n.every(i=>typeof i!="string")?n:void 0});return fe(()=>{var n,i;return[(n=(i=t.value)===null||i===void 0?void 0:i.map(a=>de(a)))!==null&&n!==void 0?n:[g].filter(a=>a!=null),M(S(t.value?e[1]:e[0])),M(U(t.value?e[2]:e[1])),S(t.value?e[3]:e[2])]},([n,i,a,u],s,p)=>{if(!n?.length||!i?.length||!a?.length)return;const f=te(u)?{...u}:u,C=n.flatMap(d=>i.flatMap(F=>a.map(h=>r(d,F,h,f))));p(()=>{C.forEach(d=>d())})},{flush:"post"})}const E=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},O="__vueuse_ssr_handlers__",pe=ve();function ve(){return O in E||(E[O]=E[O]||{}),E[O]}function ye(e,r){return pe[e]||r}function me(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"?"object":Number.isNaN(e)?"any":"number"}const ge={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}},J="vueuse-storage";function Se(e,r,t,n={}){var i;const{flush:a="pre",deep:u=!0,listenToStorageChanges:s=!0,writeDefaults:p=!0,mergeDefaults:f=!1,shallow:C,window:d=g,eventFilter:F,onError:h=o=>{console.error(o)},initOnMounted:N}=n,m=(C?Q:L)(typeof r=="function"?r():r),v=A(()=>S(e));if(!t)try{t=ye("getDefaultStorage",()=>g?.localStorage)()}catch(o){h(o)}if(!t)return m;const y=S(r),j=me(y),w=(i=n.serializer)!==null&&i!==void 0?i:ge[j],{pause:V,resume:z}=se(m,o=>q(o),{flush:a,deep:u,eventFilter:F});W(v,()=>b(),{flush:a});let T=!1;const x=o=>{N&&!T||b(o)},I=o=>{N&&!T||H(o)};d&&s&&(t instanceof Storage?D(d,"storage",x,{passive:!0}):D(d,J,I)),N?ce(()=>{T=!0,b()}):b();function k(o,l){if(d){const c={key:v.value,oldValue:o,newValue:l,storageArea:t};d.dispatchEvent(t instanceof Storage?new StorageEvent("storage",c):new CustomEvent(J,{detail:c}))}}function q(o){try{const l=t.getItem(v.value);if(o==null)k(l,null),t.removeItem(v.value);else{const c=w.write(o);l!==c&&(t.setItem(v.value,c),k(l,c))}}catch(l){h(l)}}function G(o){const l=o?o.newValue:t.getItem(v.value);if(l==null)return p&&y!=null&&t.setItem(v.value,w.write(y)),y;if(!o&&f){const c=w.read(l);return typeof f=="function"?f(c,y):j==="object"&&!Array.isArray(c)?{...y,...c}:c}else return typeof l!="string"?l:w.read(l)}function b(o){if(!(o&&o.storageArea!==t)){if(o&&o.key==null){m.value=y;return}if(!(o&&o.key!==v.value)){V();try{const l=w.write(m.value);(o===void 0||o?.newValue!==l)&&(m.value=G(o))}catch(l){h(l)}finally{o?P(z):z()}}}}function H(o){b(o.detail)}return m}function he(e,r,t={}){const{window:n=g}=t;return Se(e,r,n?.localStorage,t)}const be=X("esfashion-cart",()=>{const e=he("cart",[],{listenToStorageChanges:!0,mergeDefaults:!0}),r=A(()=>e.value.reduce((u,s)=>u+s.price*s.qty,0)),t=A(()=>e.value.reduce((u,s)=>u+s.qty,0));function n(u,s=1){const p=e.value.find(f=>f.id===u.id);p?p.qty+=s:e.value.push({...u,qty:s})}function i(u){e.value=e.value.filter(s=>s.id!==u)}function a(){e.value=[]}return{items:e,total:r,count:t,add:n,remove:i,clear:a}},{persist:!0});export{be as u};
